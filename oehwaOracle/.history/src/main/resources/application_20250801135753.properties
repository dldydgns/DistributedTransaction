# 서버 포트
server.port=8082

# 어플리케이션 이름
spring.application.name=oehwaOracle

# Oracle JDBC 접속 정보
spring.datasource.url=jdbc:oracle:thin:@localhost:1521:xe
spring.datasource.username=scott
spring.datasource.password=tiger
spring.datasource.driver-class-name=oracle.jdbc.OracleDriver

# [추가] Oracle JDBC 드라이버 타임아웃 옵션은 자바 실행시 시스템 프로퍼티로도 걸 수 있고,
# 또는 DataSource 커넥션풀(Hikari) 옵션으로 조정하는 것이 일반적입니다.

# [추가] HikariCP 커넥션풀 타임아웃 (3초)
spring.datasource.hikari.connection-timeout=3000
spring.datasource.hikari.validation-timeout=3000     
spring.datasource.hikari.maximum-pool-size=10 

# [추가] (권장) 쿼리 실행시간 제한 (3초, 초 단위)
spring.jpa.properties.hibernate.jdbc.timeout=3        # [추가] 쿼리 실행 타임아웃(초, SELECT/INSERT 등 단일 쿼리 실행시간 제한)

# JPA 설정
spring.jpa.show-sql=true
spring.jpa.hibernate.ddl-auto=update
spring.jpa.properties.hibernate.format_sql=true

debug=true

# Kafka 브로커 설정
spring.kafka.bootstrap-servers=192.168.0.2:9092

# Kafka Producer 설정 (JSON 직렬화)
spring.kafka.producer.key-serializer=org.apache.kafka.common.serialization.StringSerializer
spring.kafka.producer.value-serializer=org.springframework.kafka.support.serializer.JsonSerializer

# Kafka Consumer 설정 (JSON 역직렬화)
spring.kafka.consumer.auto-offset-reset=earliest
spring.kafka.consumer.enable-auto-commit=false
spring.kafka.consumer.key-deserializer=org.apache.kafka.common.serialization.StringDeserializer
spring.kafka.consumer.value-deserializer=org.springframework.kafka.support.serializer.JsonDeserializer

implementation 'org.springframework.retry:spring-retry'
implementation 'org.springframework:spring-aspects'

# Consumer가 JSON을 자바 객체로 변환할 때 신뢰하는 패키지
spring.kafka.consumer.properties.spring.json.trusted.packages=com.fisa.dto
# Consumer가 헤더에 타입 정보가 없을 때 사용할 기본 타입 (DepositDTO의 풀 패키지명으로!)
spring.kafka.consumer.properties.spring.json.value.default.type=com.fisa.dto.DepositDTO
